## What this is

A React app that simulates how personal influence spreads through a stylized social network. The goal is to make the gap between linear and exponential intuition viscerally visible, not to predict real-world outcomes. Story-first, honest about limitations.

## Stack

| Layer           | Tech                                                                        |
| --------------- | --------------------------------------------------------------------------- |
| Frontend        | React 19, TypeScript, Tailwind CSS v4, Recharts                             |
| Build           | Vite 7 (with `vite-plugin-wasm` + `vite-plugin-top-level-await`)            |
| Simulation      | Rust → WASM via `wasm-bindgen` / `wasm-pack`                                |
| Threading       | Web Worker (`simulation.worker.ts`) offloads simulation off the main thread |
| Package manager | `pnpm`                                                                      |

## Key files

```
src/
  types.ts              — SimParams, SimResult, Status interfaces
  simulation.ts         — TypeScript simulation (reference / fallback, not currently used)
  simulation_wasm.ts    — Thin TS wrapper around the WASM export
  simulation.worker.ts  — Web Worker: receives "run" message, calls WASM, posts back progress/result
  lib.rs                — Rust simulation (the live implementation, compiled to WASM)
  App.tsx               — Root component: owns all state, spawns worker, wires form → results
  components/           — Pure-ish presentational components (SimulationForm, ResultsPanel, etc.)
  wasm-sim/             — Generated by wasm-pack; do not edit by hand
```

## Architecture in one sentence

`App.tsx` posts a message to a Web Worker → the worker calls `runSimulateWasm` (wrapping the WASM binary in `src/wasm-sim/`) → progress and final `SimResult` are posted back → `App.tsx` updates state → `ResultsPanel` renders.

## Simulation logic

The active implementation lives in **`src/lib.rs`**. The TypeScript version in `simulation.ts` is a readable reference but is **not called at runtime**. When exploring simulation behaviour, read `lib.rs`.

Network model: each person has `avgConnections` peers; `withinRatio` fraction are "nearby" (sequential IDs) and the rest are random long-range bridges. Influence spreads BFS-style, year by year. Simulation ends when:
